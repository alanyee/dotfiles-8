#!/bin/sh
#

theme_dir="$HOME/.wm/themes"

die() {
  echo $*
  exit 1
}

# load the current theme values (meant to be eval'd)
get() {
    echo THEME_NAME=\"$(basename "$(readlink "$HOME/.bspwm_theme")")\"
    echo . "$HOME/.wm/scripts/theming/defaults"
    echo . "$HOME/.bspwm_theme"
}

# load existing theme into target editing
load() {
  name="$1"
  shift
  [ -z "$name" ] && die load needs a name.
  [ ! -f "$theme_dir/$name" ] && die $name not found

  "$HOME/.wm/scripts/theming/ltheme" "$name" $*
}

edit() {
  $EDITOR "$theme_dir/$target"
}

new() {
    name="$*"
    [ -z "$name" ] && die new needs a name.
    cp "$theme_dir/colors/default" "$theme_dir/colors/$name"
    echo "#/bin/sh" > "$theme_dir/$name"
    ltheme "$name"
    edit "$name"
}

"$@"
